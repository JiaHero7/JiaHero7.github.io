<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>JavaWeb 之 Jsp 指南 | 贾英雄-blog</title><meta name="keywords" content="Java,JavaWeb,JSP"><meta name="author" content="JaHero"><meta name="copyright" content="JaHero"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="JavaWeb 之 Jsp 指南简介什么是 Java Server PagesJSP全称Java Server Pages，是一种动态网页开发技术。 它使用 JSP 标签在 HTML 网页中插入 Java 代码。标签通常以&lt;%开头以%&gt;结束。 JSP 是一种 Java servlet，主要用于实现 Java web 应用程序的用户界面部分。网页开发者们通过结合 HTML 代码、XHTM">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb 之 Jsp 指南">
<meta property="og:url" content="http://example.com/pages/8cc787/index.html">
<meta property="og:site_name" content="贾英雄-blog">
<meta property="og:description" content="JavaWeb 之 Jsp 指南简介什么是 Java Server PagesJSP全称Java Server Pages，是一种动态网页开发技术。 它使用 JSP 标签在 HTML 网页中插入 Java 代码。标签通常以&lt;%开头以%&gt;结束。 JSP 是一种 Java servlet，主要用于实现 Java web 应用程序的用户界面部分。网页开发者们通过结合 HTML 代码、XHTM">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/post.jpg">
<meta property="article:published_time" content="2020-02-07T15:04:47.000Z">
<meta property="article:modified_time" content="2022-12-26T06:15:52.072Z">
<meta property="article:author" content="JaHero">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="JavaWeb">
<meta property="article:tag" content="JSP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/post.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/pages/8cc787/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://fastly.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"K46KXS6BKG","apiKey":"94dab3de87ce4cc2067ec6ef569e9df7","indexName":"JiaHero","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: JaHero","link":"链接: ","source":"来源: 贾英雄-blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://fastly.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://fastly.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://fastly.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JavaWeb 之 Jsp 指南',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2022-12-26 14:15:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    document.addEventListener('pjax:complete', detectApple)})(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/ava.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">495</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">294</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">118</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/photos/"><i class="fa-fw image"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/post.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">贾英雄-blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/photos/"><i class="fa-fw image"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JavaWeb 之 Jsp 指南</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-02-07T15:04:47.000Z" title="发表于 2020-02-07 23:04:47">2020-02-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-12-26T06:15:52.072Z" title="更新于 2022-12-26 14:15:52">2022-12-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/JavaEE/">JavaEE</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/JavaEE/JavaWeb/">JavaWeb</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">14k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>55分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JavaWeb 之 Jsp 指南"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="JavaWeb-之-Jsp-指南"><a href="#JavaWeb-之-Jsp-指南" class="headerlink" title="JavaWeb 之 Jsp 指南"></a>JavaWeb 之 Jsp 指南</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h3 id="什么是-Java-Server-Pages"><a href="#什么是-Java-Server-Pages" class="headerlink" title="什么是 Java Server Pages"></a>什么是 Java Server Pages</h3><p><code>JSP</code>全称<code>Java Server Pages</code>，是一种动态网页开发技术。</p>
<p>它使用 JSP 标签在 HTML 网页中插入 Java 代码。标签通常以<code>&lt;%</code>开头以<code>%&gt;</code>结束。</p>
<p>JSP 是一种 Java servlet，主要用于实现 Java web 应用程序的用户界面部分。网页开发者们通过结合 HTML 代码、XHTML 代码、XML 元素以及嵌入 JSP 操作和命令来编写 JSP。</p>
<p>JSP 通过网页表单获取用户输入数据、访问数据库及其他数据源，然后动态地创建网页。</p>
<p>JSP 标签有多种功能，比如访问数据库、记录用户选择信息、访问 JavaBeans 组件等，还可以在不同的网页中传递控制信息和共享信息。</p>
<h3 id="为什么使用-JSP"><a href="#为什么使用-JSP" class="headerlink" title="为什么使用 JSP"></a>为什么使用 JSP</h3><p>JSP 也是一种 Servlet，因此 JSP 能够完成 Servlet 能完成的任何工作。</p>
<p>JSP 程序与 CGI 程序有着相似的功能，但和 CGI 程序相比，JSP 程序有如下优势：</p>
<ul>
<li>性能更加优越，因为 JSP 可以直接在 HTML 网页中动态嵌入元素而不需要单独引用 CGI 文件。</li>
<li>服务器调用的是已经编译好的 JSP 文件，而不像 CGI&#x2F;Perl 那样必须先载入解释器和目标脚本。</li>
<li>JSP 基于 Java Servlets API，因此，JSP 拥有各种强大的企业级 Java API，包括 JDBC，JNDI，EJB，JAXP 等等。</li>
<li>JSP 页面可以与处理业务逻辑的 servlets 一起使用，这种模式被 Java servlet 模板引擎所支持。</li>
</ul>
<p>最后，JSP 是 Java EE 不可或缺的一部分，是一个完整的企业级应用平台。这意味着 JSP 可以用最简单的方式来实现最复杂的应用。</p>
<h3 id="JSP-的优势"><a href="#JSP-的优势" class="headerlink" title="JSP 的优势"></a>JSP 的优势</h3><p>以下列出了使用 JSP 带来的其他好处：</p>
<ul>
<li>与 ASP 相比：JSP 有两大优势。首先，动态部分用 Java 编写，而不是 VB 或其他 MS 专用语言，所以更加强大与易用。第二点就是 JSP 易于移植到非 MS 平台上。</li>
<li>与纯 Servlets 相比：JSP 可以很方便的编写或者修改 HTML 网页而不用去面对大量的 println 语句。</li>
<li>与 SSI 相比：SSI 无法使用表单数据、无法进行数据库链接。</li>
<li>与 JavaScript 相比：虽然 JavaScript 可以在客户端动态生成 HTML，但是很难与服务器交互，因此不能提供复杂的服务，比如访问数据库和图像处理等等。</li>
<li>与静态 HTML 相比：静态 HTML 不包含动态信息。</li>
</ul>
<h2 id="JSP-工作原理"><a href="#JSP-工作原理" class="headerlink" title="JSP 工作原理"></a>JSP 工作原理</h2><p><strong>JSP 是一种 Servlet</strong>，但工作方式和 Servlet 有所差别。</p>
<p>Servlet 是先将源代码编译为 class 文件后部署到服务器下的，<strong>先编译后部署</strong>。</p>
<p>Jsp 是先将源代码部署到服务器再编译，<strong>先部署后编译</strong>。</p>
<p>Jsp 会在客户端第一次请求 Jsp 文件时被编译为 HttpJspPage 类（Servlet 的一个子类）。该类会被服务器临时存放在服务器工作目录里。所以，第一次请求 Jsp 后，访问速度会变快就是这个道理。</p>
<h3 id="JSP-工作流程"><a href="#JSP-工作流程" class="headerlink" title="JSP 工作流程"></a>JSP 工作流程</h3><p>网络服务器需要一个 JSP 引擎，也就是一个容器来处理 JSP 页面。容器负责截获对 JSP 页面的请求。本教程使用内嵌 JSP 容器的 Apache 来支持 JSP 开发。</p>
<p>JSP 容器与 Web 服务器协同合作，为 JSP 的正常运行提供必要的运行环境和其他服务，并且能够正确识别专属于 JSP 网页的特殊元素。</p>
<p>下图显示了 JSP 容器和 JSP 文件在 Web 应用中所处的位置。</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp-arch.jpg" alt="img"></p>
<h4 id="工作步骤"><a href="#工作步骤" class="headerlink" title="工作步骤"></a>工作步骤</h4><p>以下步骤表明了 Web 服务器是如何使用 JSP 来创建网页的：</p>
<ul>
<li>就像其他普通的网页一样，您的浏览器发送一个 HTTP 请求给服务器。</li>
<li>Web 服务器识别出这是一个对 JSP 网页的请求，并且将该请求传递给 JSP 引擎。通过使用 URL 或者.jsp 文件来完成。</li>
<li>JSP 引擎从磁盘中载入 JSP 文件，然后将它们转化为 servlet。这种转化只是简单地将所有模板文本改用 println()语句，并且将所有的 JSP 元素转化成 Java 代码。</li>
<li>JSP 引擎将 servlet 编译成可执行类，并且将原始请求传递给 servlet 引擎。</li>
<li>Web 服务器的某组件将会调用 servlet 引擎，然后载入并执行 servlet 类。在执行过程中，servlet 产生 HTML 格式的输出并将其内嵌于 HTTP response 中上交给 Web 服务器。</li>
<li>Web 服务器以静态 HTML 网页的形式将 HTTP response 返回到您的浏览器中。</li>
<li>最终，Web 浏览器处理 HTTP response 中动态产生的 HTML 网页，就好像在处理静态网页一样。</li>
</ul>
<p>以上提及到的步骤可以用下图来表示：</p>
<p>一般情况下，JSP 引擎会检查 JSP 文件对应的 servlet 是否已经存在，并且检查 JSP 文件的修改日期是否早于 servlet。如果 JSP 文件的修改日期早于对应的 servlet，那么容器就可以确定 JSP 文件没有被修改过并且 servlet 有效。这使得整个流程与其他脚本语言（比如 PHP）相比要高效快捷一些。</p>
<h3 id="JSP-生命周期"><a href="#JSP-生命周期" class="headerlink" title="JSP 生命周期"></a>JSP 生命周期</h3><p>理解 JSP 底层功能的关键就是去理解它们所遵守的生命周期。</p>
<p>JSP 生命周期就是从创建到销毁的整个过程，类似于 servlet 生命周期，区别在于 JSP 生命周期还包括将 JSP 文件编译成 servlet。</p>
<p>以下是 JSP 生命周期中所走过的几个阶段：</p>
<ul>
<li><strong>编译阶段：</strong>servlet 容器编译 servlet 源文件，生成 servlet 类</li>
<li><strong>初始化阶段：</strong>加载与 JSP 对应的 servlet 类，创建其实例，并调用它的初始化方法</li>
<li><strong>执行阶段：</strong>调用与 JSP 对应的 servlet 实例的服务方法</li>
<li><strong>销毁阶段：</strong>调用与 JSP 对应的 servlet 实例的销毁方法，然后销毁 servlet 实例</li>
</ul>
<p>很明显，JSP 生命周期的四个主要阶段和 servlet 生命周期非常相似，下面给出图示：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp_life_cycle.jpg" alt="img"></p>
<h4 id="JSP-编译"><a href="#JSP-编译" class="headerlink" title="JSP 编译"></a>JSP 编译</h4><p>当浏览器请求 JSP 页面时，JSP 引擎会首先去检查是否需要编译这个文件。如果这个文件没有被编译过，或者在上次编译后被更改过，则编译这个 JSP 文件。</p>
<p>编译的过程包括三个步骤：</p>
<ul>
<li>解析 JSP 文件。</li>
<li>将 JSP 文件转为 servlet。</li>
<li>编译 servlet。</li>
</ul>
<h4 id="JSP-初始化"><a href="#JSP-初始化" class="headerlink" title="JSP 初始化"></a>JSP 初始化</h4><p>容器载入 JSP 文件后，它会在为请求提供任何服务前调用 jspInit()方法。如果您需要执行自定义的 JSP 初始化任务，复写 jspInit()方法就行了，就像下面这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">jspInit</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="comment">// 初始化代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一般来讲程序只初始化一次，servlet 也是如此。通常情况下您可以在 jspInit()方法中初始化数据库连接、打开文件和创建查询表。</p>
<h4 id="JSP-执行"><a href="#JSP-执行" class="headerlink" title="JSP 执行"></a>JSP 执行</h4><p>这一阶段描述了 JSP 生命周期中一切与请求相关的交互行为，直到被销毁。</p>
<p>当 JSP 网页完成初始化后，JSP 引擎将会调用 <code>_jspService()</code> 方法。</p>
<p><code>_jspService()</code> 方法需要一个 HttpServletRequest 对象和一个 HttpServletResponse 对象作为它的参数，就像下面这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">_jspService</span><span class="params">(HttpServletRequest request,</span></span><br><span class="line"><span class="params">                 HttpServletResponse response)</span> &#123;</span><br><span class="line">   <span class="comment">// 服务端处理代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>_jspService()</code> 方法在每个 request 中被调用一次并且负责产生与之相对应的 response，并且它还负责产生所有 7 个 HTTP 方法的回应，比如 GET、POST、DELETE 等等。</p>
<h4 id="JSP-清理"><a href="#JSP-清理" class="headerlink" title="JSP 清理"></a>JSP 清理</h4><p>JSP 生命周期的销毁阶段描述了当一个 JSP 网页从容器中被移除时所发生的一切。</p>
<p>jspDestroy()方法在 JSP 中等价于 servlet 中的销毁方法。当您需要执行任何清理工作时复写 jspDestroy()方法，比如释放数据库连接或者关闭文件夹等等。</p>
<p>jspDestroy()方法的格式如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">jspDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="comment">// 清理代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><p>脚本程序可以包含任意量的 Java 语句、变量、方法或表达式，只要它们在脚本语言中是有效的。</p>
<p>脚本程序的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;% 代码片段 %&gt;</span><br></pre></td></tr></table></figure>

<p>或者，您也可以编写与其等价的 XML 语句，就像下面这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:scriptlet&gt;</span><br><span class="line">  代码片段</span><br><span class="line">&lt;/jsp:scriptlet&gt;</span><br></pre></td></tr></table></figure>

<p>任何文本、HTML 标签、JSP 元素必须写在脚本程序的外面。</p>
<p>下面给出一个示例，同时也是本教程的第一个 JSP 示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Hello World&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    Hello World!&lt;br /&gt;</span><br><span class="line">    &lt;% out.println(&quot;Your IP address is &quot; + request.getRemoteAddr()); %&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>请确保 Apache Tomcat 已经安装在 C:\apache-tomcat-7.0.2 目录下并且运行环境已经正确设置。</p>
<p>将以上代码保存在 hello.jsp 中，然后将它放置在 C:\apache-tomcat-7.0.2\webapps\ROOT 目录下，打开浏览器并在地址栏中输入 <code>http://localhost:8080/hello.jsp</code> 。运行后得到以下结果：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp_hello_world.jpg" alt="img"></p>
<h4 id="中文编码问题"><a href="#中文编码问题" class="headerlink" title="中文编码问题"></a>中文编码问题</h4><p>如果我们要在页面正常显示中文，我们需要在 JSP 文件头部添加以下代码：<code>&lt;&gt;</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br></pre></td></tr></table></figure>

<p>接下来我们将以上程序修改为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    Hello World!&lt;br /&gt;</span><br><span class="line">    &lt;% out.println(&quot;你的 IP 地址 &quot; + request.getRemoteAddr()); %&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>这样中文就可以正常显示了。</p>
<h3 id="JSP-声明"><a href="#JSP-声明" class="headerlink" title="JSP 声明"></a>JSP 声明</h3><p>一个声明语句可以声明一个或多个变量、方法，供后面的 Java 代码使用。在 JSP 文件中，您必须先声明这些变量和方法然后才能使用它们。</p>
<p>JSP 声明的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! declaration; [ declaration; ]+ ... %&gt;</span><br></pre></td></tr></table></figure>

<p>或者，您也可以编写与其等价的 XML 语句，就像下面这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:declaration&gt;</span><br><span class="line">  代码片段</span><br><span class="line">&lt;/jsp:declaration&gt;</span><br></pre></td></tr></table></figure>

<p>程序示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! int i = 0; %&gt; &lt;%! int a, b, c; %&gt; &lt;%! Circle a = new Circle(2.0); %&gt;</span><br></pre></td></tr></table></figure>

<h3 id="JSP-表达式"><a href="#JSP-表达式" class="headerlink" title="JSP 表达式"></a>JSP 表达式</h3><p>一个 JSP 表达式中包含的脚本语言表达式，先被转化成 String，然后插入到表达式出现的地方。</p>
<p>由于表达式的值会被转化成 String，所以您可以在一个文本行中使用表达式而不用去管它是否是 HTML 标签。</p>
<p>表达式元素中可以包含任何符合 Java 语言规范的表达式，但是不能使用分号来结束表达式。</p>
<p>JSP 表达式的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%= 表达式 %&gt;</span><br></pre></td></tr></table></figure>

<p>同样，您也可以编写与之等价的 XML 语句：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:expression&gt;</span><br><span class="line">  表达式</span><br><span class="line">&lt;/jsp:expression&gt;</span><br></pre></td></tr></table></figure>

<p>程序示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      今天的日期是: &lt;%= (new java.util.Date()).toLocaleString()%&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>运行后得到以下结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">今天的日期是: 2016-6-25 13:40:07</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="JSP-注释"><a href="#JSP-注释" class="headerlink" title="JSP 注释"></a>JSP 注释</h3><p>JSP 注释主要有两个作用：为代码作注释以及将某段代码注释掉。</p>
<p>JSP 注释的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;JSP注释示例&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;%-- 该部分注释在网页中不会被显示--%&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      今天的日期是: &lt;%= (new java.util.Date()).toLocaleString()%&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>运行后得到以下结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">今天的日期是: 2016-6-25 13:41:26</span><br></pre></td></tr></table></figure>

<p>不同情况下使用注释的语法规则：</p>
<table>
<thead>
<tr>
<th><strong>语法</strong></th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;%-- 注释 --%&gt;</code></td>
<td>JSP 注释，注释内容不会被发送至浏览器甚至不会被编译</td>
</tr>
<tr>
<td><code>&lt;!-- 注释 --&gt;</code></td>
<td>HTML 注释，通过浏览器查看网页源代码时可以看见注释内容</td>
</tr>
<tr>
<td><code>&lt;%</code></td>
<td>代表静态 &lt;%常量</td>
</tr>
<tr>
<td><code>%&gt;</code></td>
<td>代表静态 %&gt; 常量</td>
</tr>
<tr>
<td><code>&#39;</code></td>
<td>在属性中使用的单引号</td>
</tr>
<tr>
<td><code>&quot;</code></td>
<td>在属性中使用的双引号</td>
</tr>
</tbody></table>
<h3 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a>控制语句</h3><p>JSP 提供对 Java 语言的全面支持。您可以在 JSP 程序中使用 Java API 甚至建立 Java 代码块，包括判断语句和循环语句等等。</p>
<h4 id="if…else-语句"><a href="#if…else-语句" class="headerlink" title="if…else 语句"></a>if…else 语句</h4><p><code>If…else</code>块，请看下面这个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt; &lt;%! int day = 1; %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;02.JSP语法 - if...else示例&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h3&gt;IF...ELSE 实例&lt;/h3&gt;</span><br><span class="line">    &lt;% if (day == 1 | day == 7) &#123; %&gt;</span><br><span class="line">    &lt;p&gt;今天是周末&lt;/p&gt;</span><br><span class="line">    &lt;% &#125; else &#123; %&gt;</span><br><span class="line">    &lt;p&gt;今天不是周末&lt;/p&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>运行后得到以下结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IF...ELSE 实例</span><br><span class="line">今天不是周末</span><br></pre></td></tr></table></figure>

<h4 id="switch…case-语句"><a href="#switch…case-语句" class="headerlink" title="switch…case 语句"></a>switch…case 语句</h4><p>现在来看看 switch…case 块，与 if…else 块有很大的不同，它使用 out.println()，并且整个都装在脚本程序的标签中，就像下面这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt; &lt;%! int day = 3; %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;02.JSP语法 - switch...case示例&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h3&gt;Sswitch...case示例&lt;/h3&gt;</span><br><span class="line">    &lt;% switch(day) &#123; case 0: out.println(&quot;星期天&quot;); break; case 1:</span><br><span class="line">    out.println(&quot;星期一&quot;); break; case 2: out.println(&quot;星期二&quot;); break; case 3:</span><br><span class="line">    out.println(&quot;星期三&quot;); break; case 4: out.println(&quot;星期四&quot;); break; case 5:</span><br><span class="line">    out.println(&quot;星期五&quot;); break; default: out.println(&quot;星期六&quot;); &#125; %&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>浏览器访问，运行后得出以下结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SWITCH...CASE 实例</span><br><span class="line"></span><br><span class="line">星期三</span><br></pre></td></tr></table></figure>

<h4 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h4><p>在 JSP 程序中可以使用 Java 的三个基本循环类型：for，while，和 do…while。</p>
<p>让我们来看看 for 循环的例子，以下输出的不同字体大小的”菜鸟教程”：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt; &lt;%! int fontSize; %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h3&gt;For 循环实例&lt;/h3&gt;</span><br><span class="line">    &lt;%for ( fontSize = 1; fontSize &lt;= 3; fontSize++)&#123; %&gt;</span><br><span class="line">    &lt;font color=&quot;green&quot; size=&quot;&lt;%= fontSize %&gt;&quot;&gt;</span><br><span class="line">      菜鸟教程 &lt;/font</span><br><span class="line">    &gt;&lt;br /&gt;</span><br><span class="line">    &lt;%&#125;%&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>运行后得到以下结果：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/7B4B85CF-FE4B-43CB-AAFF-F8594AD4342C.jpg" alt="img"></p>
<p>将上例改用 while 循环来写：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt; &lt;%! int fontSize; %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h3&gt;While 循环实例&lt;/h3&gt;</span><br><span class="line">    &lt;%while ( fontSize &lt;= 3)&#123; %&gt;</span><br><span class="line">    &lt;font color=&quot;green&quot; size=&quot;&lt;%= fontSize %&gt;&quot;&gt;</span><br><span class="line">      菜鸟教程 &lt;/font</span><br><span class="line">    &gt;&lt;br /&gt;</span><br><span class="line">    &lt;%fontSize++;%&gt; &lt;%&#125;%&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>浏览器访问，输出结果为（fontSize 初始化为 0，所以多输出了一行）：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/4F744CC9-E484-45BA-AF18-27AFCF4AD45C.jpg" alt="img"></p>
<p>JSP 运算符</p>
<p>JSP 支持所有 Java 逻辑和算术运算符。</p>
<p>下表罗列出了 JSP 常见运算符，优先级从高到底：</p>
<table>
<thead>
<tr>
<th><strong>类别</strong></th>
<th><strong>操作符</strong></th>
<th><strong>结合性</strong></th>
</tr>
</thead>
<tbody><tr>
<td>后缀</td>
<td><code>() [] .</code> (点运算符)</td>
<td>左到右</td>
</tr>
<tr>
<td>一元</td>
<td><code>++ - - ! ~</code></td>
<td>右到左</td>
</tr>
<tr>
<td>可乘性</td>
<td><code>* / %</code></td>
<td>左到右</td>
</tr>
<tr>
<td>可加性</td>
<td><code>+ -</code></td>
<td>左到右</td>
</tr>
<tr>
<td>移位</td>
<td><code>&gt;&gt; &gt;&gt;&gt; &lt;&lt;</code></td>
<td>左到右</td>
</tr>
<tr>
<td>关系</td>
<td><code>&gt; &gt;= &lt; &lt;=</code></td>
<td>左到右</td>
</tr>
<tr>
<td>相等&#x2F;不等</td>
<td><code>== !=</code></td>
<td>左到右</td>
</tr>
<tr>
<td>位与</td>
<td><code>&amp;</code></td>
<td>左到右</td>
</tr>
<tr>
<td>位异或</td>
<td><code>^</code></td>
<td>左到右</td>
</tr>
<tr>
<td>位或</td>
<td>&#96;</td>
<td>&#96;</td>
</tr>
<tr>
<td>逻辑与</td>
<td><code>&amp;&amp;</code></td>
<td>左到右</td>
</tr>
<tr>
<td>逻辑或</td>
<td>&#96;</td>
<td></td>
</tr>
<tr>
<td>条件判断</td>
<td><code>?:</code></td>
<td>右到左</td>
</tr>
<tr>
<td>赋值</td>
<td>&#96;&#x3D; +&#x3D; -&#x3D; *&#x3D; &#x2F;&#x3D; %&#x3D; &gt;&gt;&#x3D; &lt;&lt;&#x3D; &amp;&#x3D; ^&#x3D;</td>
<td>&#x3D;&#96;</td>
</tr>
<tr>
<td>逗号</td>
<td><code>,</code></td>
<td>左到右</td>
</tr>
</tbody></table>
<h3 id="JSP-字面量"><a href="#JSP-字面量" class="headerlink" title="JSP 字面量"></a>JSP 字面量</h3><p>JSP 语言定义了以下几个字面量：</p>
<ul>
<li>布尔值(boolean)：true 和 false;</li>
<li>整型(int)：与 Java 中的一样;</li>
<li>浮点型(float)：与 Java 中的一样;</li>
<li>字符串(string)：以单引号或双引号开始和结束;</li>
<li>Null：null。</li>
</ul>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><p>JSP 指令用来设置整个 JSP 页面相关的属性，如网页的编码方式和脚本语言。</p>
<p>JSP 指令以开<code>&lt;%@</code>开始，以<code>%&gt;</code>结束。</p>
<p>JSP 指令语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ directive attribute=&quot;value&quot; %&gt;</span><br></pre></td></tr></table></figure>

<p>指令可以有很多个属性，它们以键值对的形式存在，并用逗号隔开。</p>
<p>JSP 中的三种指令标签：</p>
<table>
<thead>
<tr>
<th><strong>指令</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;%@ page ... %&gt;</code></td>
<td>定义网页依赖属性，比如脚本语言、error 页面、缓存需求等等</td>
</tr>
<tr>
<td><code>&lt;%@ include ... %&gt;</code></td>
<td>包含其他文件</td>
</tr>
<tr>
<td><code>&lt;%@ taglib ... %&gt;</code></td>
<td>引入标签库的定义，可以是自定义标签</td>
</tr>
</tbody></table>
<h3 id="Page-指令"><a href="#Page-指令" class="headerlink" title="Page 指令"></a>Page 指令</h3><p>Page 指令为容器提供当前页面的使用说明。一个 JSP 页面可以包含多个<code>page</code>指令。</p>
<p>Page 指令的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page attribute=&quot;value&quot; %&gt;</span><br></pre></td></tr></table></figure>

<p>等价的 XML 格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:directive.page attribute=&quot;value&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot; %&gt;</span><br></pre></td></tr></table></figure>

<h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><p>下表列出与 Page 指令相关的属性：</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>buffer</td>
<td>指定 out 对象使用缓冲区的大小</td>
</tr>
<tr>
<td>autoFlush</td>
<td>控制 out 对象的 缓存区</td>
</tr>
<tr>
<td>contentType</td>
<td>指定当前 JSP 页面的 MIME 类型和字符编码</td>
</tr>
<tr>
<td>errorPage</td>
<td>指定当 JSP 页面发生异常时需要转向的错误处理页面</td>
</tr>
<tr>
<td>isErrorPage</td>
<td>指定当前页面是否可以作为另一个 JSP 页面的错误处理页面</td>
</tr>
<tr>
<td>extends</td>
<td>指定 servlet 从哪一个类继承</td>
</tr>
<tr>
<td>import</td>
<td>导入要使用的 Java 类</td>
</tr>
<tr>
<td>info</td>
<td>定义 JSP 页面的描述信息</td>
</tr>
<tr>
<td>isThreadSafe</td>
<td>指定对 JSP 页面的访问是否为线程安全</td>
</tr>
<tr>
<td>language</td>
<td>定义 JSP 页面所用的脚本语言，默认是 Java</td>
</tr>
<tr>
<td>session</td>
<td>指定 JSP 页面是否使用 session</td>
</tr>
<tr>
<td>isELIgnored</td>
<td>指定是否执行 EL 表达式</td>
</tr>
<tr>
<td>isScriptingEnabled</td>
<td>确定脚本元素能否被使用</td>
</tr>
</tbody></table>
<h3 id="Include-指令"><a href="#Include-指令" class="headerlink" title="Include 指令"></a>Include 指令</h3><p>JSP 可以通过<code>include</code>指令来包含其他文件。</p>
<p>被包含的文件可以是 JSP 文件、HTML 文件或文本文件。包含的文件就好像是该 JSP 文件的一部分，会被同时编译执行。</p>
<p>Include 指令的语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ include file=&quot;文件相对 url 地址&quot; %&gt;</span><br></pre></td></tr></table></figure>

<p><strong>include</strong> 指令中的文件名实际上是一个相对的 URL 地址。</p>
<p>如果您没有给文件关联一个路径，JSP 编译器默认在当前路径下寻找。</p>
<p>等价的 XML 语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:directive.include file=&quot;文件相对 url 地址&quot; /&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Taglib-指令"><a href="#Taglib-指令" class="headerlink" title="Taglib 指令"></a>Taglib 指令</h3><p>JSP 允许用户自定义标签，一个自定义标签库就是自定义标签的集合。</p>
<p><code>taglib</code>指令引入一个自定义标签集合的定义，包括库路径、自定义标签。</p>
<p><code>taglib</code>指令的语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib uri=&quot;uri&quot; prefix=&quot;prefixOfTag&quot; %&gt;</span><br></pre></td></tr></table></figure>

<p>uri 属性确定标签库的位置，prefix 属性指定标签库的前缀。</p>
<p>等价的 XML 语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:directive.taglib uri=&quot;uri&quot; prefix=&quot;prefixOfTag&quot; /&gt;</span><br></pre></td></tr></table></figure>

<h2 id="JSP-动作元素"><a href="#JSP-动作元素" class="headerlink" title="JSP 动作元素"></a>JSP 动作元素</h2><p>JSP 动作元素是一组 JSP 内置的标签，只需要书写很少的标记代码就能使用 JSP 提供的丰富功能。JSP 动作元素是对常用的 JSP 功能的抽象与封装，包括两种，自定义 JSP 动作元素与标准 JSP 动作元素。</p>
<p>与 JSP 指令元素不同的是，JSP 动作元素在请求处理阶段起作用。JSP 动作元素是用 XML 语法写成的。</p>
<p>利用 JSP 动作可以动态地插入文件、重用 JavaBean 组件、把用户重定向到另外的页面、为 Java 插件生成 HTML 代码。</p>
<p>动作元素只有一种语法，它符合 XML 标准：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:action_name attribute=&quot;value&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>动作元素基本上都是预定义的函数，JSP 规范定义了一系列的标准动作，它用 JSP 作为前缀，可用的标准动作元素如下：</p>
<table>
<thead>
<tr>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>jsp:include</td>
<td>在页面被请求的时候引入一个文件。</td>
</tr>
<tr>
<td>jsp:useBean</td>
<td>寻找或者实例化一个 JavaBean。</td>
</tr>
<tr>
<td>jsp:setProperty</td>
<td>设置 JavaBean 的属性。</td>
</tr>
<tr>
<td>jsp:getProperty</td>
<td>输出某个 JavaBean 的属性。</td>
</tr>
<tr>
<td>jsp:forward</td>
<td>把请求转到一个新的页面。</td>
</tr>
<tr>
<td>jsp:plugin</td>
<td>根据浏览器类型为 Java 插件生成 OBJECT 或 EMBED 标记。</td>
</tr>
<tr>
<td>jsp:element</td>
<td>定义动态 XML 元素</td>
</tr>
<tr>
<td>jsp:attribute</td>
<td>设置动态定义的 XML 元素属性。</td>
</tr>
<tr>
<td>jsp:body</td>
<td>设置动态定义的 XML 元素内容。</td>
</tr>
<tr>
<td>jsp:text</td>
<td>在 JSP 页面和文档中使用写入文本的模板</td>
</tr>
</tbody></table>
<h3 id="常见的属性"><a href="#常见的属性" class="headerlink" title="常见的属性"></a>常见的属性</h3><p>所有的动作要素都有两个属性：id 属性和 scope 属性。</p>
<ul>
<li><strong>id 属性：</strong>id 属性是动作元素的唯一标识，可以在 JSP 页面中引用。动作元素创建的 id 值可以通过 PageContext 来调用。</li>
<li><strong>scope 属性：</strong>该属性用于识别动作元素的生命周期。 id 属性和 scope 属性有直接关系，scope 属性定义了相关联 id 对象的寿命。 scope 属性有四个可能的值： (a) page, (b)request, (c)session, 和 (d) application。</li>
</ul>
<h3 id="lt-jsp-include-gt"><a href="#lt-jsp-include-gt" class="headerlink" title="&lt;jsp:include&gt;"></a><code>&lt;jsp:include&gt;</code></h3><p><code>&lt;jsp:include&gt;</code> 用来包含静态和动态的文件。该动作把指定文件插入正在生成的页面。</p>
<p>如果被包含的文件为 JSP 程序，则会先执行 JSP 程序，再将执行结果包含进来。</p>
<p>语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:include page=&quot;相对 URL 地址&quot; flush=&quot;true&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>前面已经介绍过 include 指令，它是在 JSP 文件被转换成 Servlet 的时候引入文件，而这里的 jsp:include 动作不同，插入文件的时间是在页面被请求的时候。</p>
<p>以下是 include 动作相关的属性列表。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>page</td>
<td>包含在页面中的相对 URL 地址。</td>
</tr>
<tr>
<td>flush</td>
<td>布尔属性，定义在包含资源前是否刷新缓存区。</td>
</tr>
</tbody></table>
<p>示例：</p>
<p>以下我们定义了两个文件 <strong>date.jsp</strong> 和 <strong>main.jsp</strong>，代码如下所示：</p>
<p>date.jsp 文件代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">  今天的日期是: &lt;%= (new java.util.Date())%&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>main.jsp 文件代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h2&gt;include 动作实例&lt;/h2&gt;</span><br><span class="line">    &lt;jsp:include page=&quot;date.jsp&quot; flush=&quot;true&quot; /&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>现在将以上两个文件放在服务器的根目录下，访问 main.jsp 文件。显示结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">include 动作实例</span><br><span class="line"></span><br><span class="line">今天的日期是: 2016-6-25 14:08:17</span><br></pre></td></tr></table></figure>

<h3 id="lt-jsp-useBean-gt"><a href="#lt-jsp-useBean-gt" class="headerlink" title="&lt;jsp:useBean&gt;"></a><code>&lt;jsp:useBean&gt;</code></h3><p><strong>jsp:useBean</strong> 动作用来加载一个将在 JSP 页面中使用的 JavaBean。</p>
<p>这个功能非常有用，因为它使得我们可以发挥 Java 组件复用的优势。</p>
<p>jsp:useBean 动作最简单的语法为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=&quot;name&quot; class=&quot;package.class&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>在类载入后，我们既可以通过 jsp:setProperty 和 jsp:getProperty 动作来修改和检索 bean 的属性。</p>
<p>以下是 useBean 动作相关的属性列表。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>class</td>
<td>指定 Bean 的完整包名。</td>
</tr>
<tr>
<td>type</td>
<td>指定将引用该对象变量的类型。</td>
</tr>
<tr>
<td>beanName</td>
<td>通过 java.beans.Beans 的 instantiate() 方法指定 Bean 的名字。</td>
</tr>
</tbody></table>
<p>在给出具体实例前，让我们先来看下 jsp:setProperty 和 jsp:getProperty 动作元素：</p>
<h3 id="lt-jsp-setProperty-gt"><a href="#lt-jsp-setProperty-gt" class="headerlink" title="&lt;jsp:setProperty&gt;"></a><code>&lt;jsp:setProperty&gt;</code></h3><p>jsp:setProperty 用来设置已经实例化的 Bean 对象的属性，有两种用法。首先，你可以在 jsp:useBean 元素的外面（后面）使用 jsp:setProperty，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=&quot;myName&quot; ... /&gt;</span><br><span class="line">...</span><br><span class="line">&lt;jsp:setProperty name=&quot;myName&quot; property=&quot;someProperty&quot; .../&gt;</span><br></pre></td></tr></table></figure>

<p>此时，不管 jsp:useBean 是找到了一个现有的 Bean，还是新创建了一个 Bean 实例，jsp:setProperty 都会执行。第二种用法是把 jsp:setProperty 放入 jsp:useBean 元素的内部，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=&quot;myName&quot; ... &gt;</span><br><span class="line">...</span><br><span class="line">   &lt;jsp:setProperty name=&quot;myName&quot; property=&quot;someProperty&quot; .../&gt;</span><br><span class="line">&lt;/jsp:useBean&gt;</span><br></pre></td></tr></table></figure>

<p>此时，jsp:setProperty 只有在新建 Bean 实例时才会执行，如果是使用现有实例则不执行 jsp:setProperty。</p>
<p>jsp:setProperty 动作有下面四个属性,如下表：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>name 属性是必需的。它表示要设置属性的是哪个 Bean。</td>
</tr>
<tr>
<td>property</td>
<td>property 属性是必需的。它表示要设置哪个属性。有一个特殊用法：如果 property 的值是”*“，表示所有名字和 Bean 属性名字匹配的请求参数都将被传递给相应的属性 set 方法。</td>
</tr>
<tr>
<td>value</td>
<td>value 属性是可选的。该属性用来指定 Bean 属性的值。字符串数据会在目标类中通过标准的 valueOf 方法自动转换成数字、boolean、Boolean、 byte、Byte、char、Character。例如，boolean 和 Boolean 类型的属性值（比如”true”）通过 Boolean.valueOf 转换，int 和 Integer 类型的属性值（比如”42”）通过 Integer.valueOf 转换。 　　 value 和 param 不能同时使用，但可以使用其中任意一个。</td>
</tr>
<tr>
<td>param</td>
<td>param 是可选的。它指定用哪个请求参数作为 Bean 属性的值。如果当前请求没有参数，则什么事情也不做，系统不会把 null 传递给 Bean 属性的 set 方法。因此，你可以让 Bean 自己提供默认属性值，只有当请求参数明确指定了新值时才修改默认属性值。</td>
</tr>
</tbody></table>
<h3 id="lt-jsp-getProperty-gt"><a href="#lt-jsp-getProperty-gt" class="headerlink" title="&lt;jsp:getProperty&gt;"></a><code>&lt;jsp:getProperty&gt;</code></h3><p>jsp:getProperty 动作提取指定 Bean 属性的值，转换成字符串，然后输出。语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=&quot;myName&quot; ... /&gt;</span><br><span class="line">...</span><br><span class="line">&lt;jsp:getProperty name=&quot;myName&quot; property=&quot;someProperty&quot; .../&gt;</span><br></pre></td></tr></table></figure>

<p>下表是与 getProperty 相关联的属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>要检索的 Bean 属性名称。Bean 必须已定义。</td>
</tr>
<tr>
<td>property</td>
<td>表示要提取 Bean 属性的值</td>
</tr>
</tbody></table>
<p>实例</p>
<p>以下实例我们使用了 Bean:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.main;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBean</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;菜鸟教程&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span>(message);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.message = message;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译以上实例文件 TestBean.java ：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ javac TestBean.java</span><br></pre></td></tr></table></figure>

<p>编译完成后会在当前目录下生成一个 <strong>TestBean.class</strong> 文件， 将该文件拷贝至当前 JSP 项目的 <strong>WebContent&#x2F;WEB-INF&#x2F;classes&#x2F;com&#x2F;runoob&#x2F;main</strong> 下( com&#x2F;runoob&#x2F;main 包路径，没有需要手动创建)。</p>
<p>下面是一个 Eclipse 中目录结构图：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/6AC33FBA-0B76-4BFD-A690-E856E9E01900.jpg" alt="img"></p>
<p>下面是一个很简单的例子，它的功能是装载一个 Bean，然后设置&#x2F;读取它的 message 属性。</p>
<p>现在让我们在 main.jsp 文件中调用该 Bean:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h2&gt;Jsp 使用 JavaBean 实例&lt;/h2&gt;</span><br><span class="line">    &lt;jsp:useBean id=&quot;test&quot; class=&quot;com.runoob.main.TestBean&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;jsp:setProperty name=&quot;test&quot; property=&quot;message&quot; value=&quot;菜鸟教程...&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;p&gt;输出信息....&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">    &lt;jsp:getProperty name=&quot;test&quot; property=&quot;message&quot; /&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>浏览器访问，执行以上文件，输出如下所示：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/D7AD87A8-3392-4D4E-8731-18806B0644CD.jpg" alt="img"></p>
<h3 id="lt-jsp-forward-gt"><a href="#lt-jsp-forward-gt" class="headerlink" title="&lt;jsp:forward&gt;"></a><code>&lt;jsp:forward&gt;</code></h3><p>jsp:forward 动作把请求转到另外的页面。jsp:forward 标记只有一个属性 page。语法格式如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:forward page=&quot;相对 URL 地址&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>以下是 forward 相关联的属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>page</td>
<td>page 属性包含的是一个相对 URL。page 的值既可以直接给出，也可以在请求的时候动态计算，可以是一个 JSP 页面或者一个 Java Servlet.</td>
</tr>
</tbody></table>
<p>实例</p>
<p>以下实例我们使用了两个文件，分别是： date.jsp 和 main.jsp。</p>
<p>date.jsp 文件代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">  今天的日期是: &lt;%= (new java.util.Date()).toLocaleString()%&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>main.jsp 文件代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h2&gt;forward 动作实例&lt;/h2&gt;</span><br><span class="line">    &lt;jsp:forward page=&quot;date.jsp&quot; /&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>现在将以上两个文件放在服务器的根目录下，访问 main.jsp 文件。显示结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">今天的日期是: 2016-6-25 14:37:25</span><br></pre></td></tr></table></figure>

<h3 id="lt-jsp-plugin-gt"><a href="#lt-jsp-plugin-gt" class="headerlink" title="&lt;jsp:plugin&gt;"></a><code>&lt;jsp:plugin&gt;</code></h3><p>jsp:plugin 动作用来根据浏览器的类型，插入通过 Java 插件 运行 Java Applet 所必需的 OBJECT 或 EMBED 元素。</p>
<p>如果需要的插件不存在，它会下载插件，然后执行 Java 组件。 Java 组件可以是一个 applet 或一个 JavaBean。</p>
<p>plugin 动作有多个对应 HTML 元素的属性用于格式化 Java 组件。param 元素可用于向 Applet 或 Bean 传递参数。</p>
<p>以下是使用 plugin 动作元素的典型实例:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:plugin type=&quot;applet&quot; codebase=&quot;dirname&quot; code=&quot;MyApplet.class&quot;</span><br><span class="line">                           width=&quot;60&quot; height=&quot;80&quot;&gt;</span><br><span class="line">   &lt;jsp:param name=&quot;fontcolor&quot; value=&quot;red&quot; /&gt;</span><br><span class="line">   &lt;jsp:param name=&quot;background&quot; value=&quot;black&quot; /&gt;</span><br><span class="line"></span><br><span class="line">   &lt;jsp:fallback&gt;</span><br><span class="line">      Unable to initialize Java Plugin</span><br><span class="line">   &lt;/jsp:fallback&gt;</span><br><span class="line"></span><br><span class="line">&lt;/jsp:plugin&gt;</span><br></pre></td></tr></table></figure>

<p>如果你有兴趣可以尝试使用 applet 来测试 <code>jsp:plugin</code> 动作元素，<code>&lt;fallback&gt;</code> 元素是一个新元素，在组件出现故障的错误是发送给用户错误信息。</p>
<h3 id="lt-jsp-element-gt-、-lt-jsp-attribute-gt-、-lt-jsp-body-gt"><a href="#lt-jsp-element-gt-、-lt-jsp-attribute-gt-、-lt-jsp-body-gt" class="headerlink" title="&lt;jsp:element&gt; 、 &lt;jsp:attribute&gt;、&lt;jsp:body&gt;"></a><code>&lt;jsp:element&gt;</code> 、 <code>&lt;jsp:attribute&gt;</code>、<code>&lt;jsp:body&gt;</code></h3><p><code>&lt;jsp:element&gt;</code> 、 <code>&lt;jsp:attribute&gt;</code>、<code>&lt;jsp:body&gt;</code> 动作元素动态定义 XML 元素。动态是非常重要的，这就意味着 XML 元素在编译时是动态生成的而非静态。</p>
<p>以下实例动态定义了 XML 元素：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;jsp:element name=&quot;xmlElement&quot;&gt;</span><br><span class="line">      &lt;jsp:attribute name=&quot;xmlElementAttr&quot;&gt;</span><br><span class="line">        属性值</span><br><span class="line">      &lt;/jsp:attribute&gt;</span><br><span class="line">      &lt;jsp:body&gt;</span><br><span class="line">        XML 元素的主体</span><br><span class="line">      &lt;/jsp:body&gt;</span><br><span class="line">    &lt;/jsp:element&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>浏览器访问以下页面，输出结果如下所示：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/7D8C47F0-0DDE-4F1D-8BE1-B2C9C955683E.jpg" alt="img"></p>
<h3 id="lt-jsp-text-gt"><a href="#lt-jsp-text-gt" class="headerlink" title="&lt;jsp:text&gt;"></a><code>&lt;jsp:text&gt;</code></h3><p><a href="jsp:text">jsp:text</a>动作元素允许在 JSP 页面和文档中使用写入文本的模板，语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;模板数据&lt;/jsp:text&gt;</span><br></pre></td></tr></table></figure>

<p>以上文本模板不能包含其他元素，只能只能包含文本和 EL 表达式（注：EL 表达式将在后续章节中介绍）。请注意，在 XML 文件中，您不能使用表达式如 ${whatever &gt; 0}，因为&gt;符号是非法的。 你可以使用 ${whatever gt 0}表达式或者嵌入在一个 CDATA 部分的值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;&lt;![CDATA[&lt;br&gt;]]&gt;&lt;/jsp:text&gt;</span><br></pre></td></tr></table></figure>

<p>如果你需要在 XHTML 中声明 DOCTYPE,必须使用到 <code>&lt;jsp:text&gt;</code> 动作元素，实例如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;&lt;![CDATA[&lt;!DOCTYPE html</span><br><span class="line">PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;</span><br><span class="line">&quot;DTD/xhtml1-strict.dtd&quot;&gt;]]&gt;</span><br><span class="line">&lt;/jsp:text&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;jsp:text action&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;books&gt;&lt;book&gt;&lt;jsp:text&gt;</span><br><span class="line">    Welcome to JSP Programming</span><br><span class="line">&lt;/jsp:text&gt;&lt;/book&gt;&lt;/books&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>你可以对以上实例尝试使用<a href="jsp:text">jsp:text</a>及不使用该动作元素执行结果的区别。</p>
<h2 id="JSP-隐式对象"><a href="#JSP-隐式对象" class="headerlink" title="JSP 隐式对象"></a>JSP 隐式对象</h2><p>JSP 隐式对象是 JSP 容器为每个页面提供的 Java 对象，开发者可以直接使用它们而不用显式声明。JSP 隐式对象也被称为预定义变量。</p>
<p>JSP 所支持的九大隐式对象：</p>
<table>
<thead>
<tr>
<th><strong>对象</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>request</td>
<td><strong>HttpServletRequest</strong>类的实例</td>
</tr>
<tr>
<td>response</td>
<td><strong>HttpServletResponse</strong>类的实例</td>
</tr>
<tr>
<td>out</td>
<td><strong>PrintWriter</strong>类的实例，用于把结果输出至网页上</td>
</tr>
<tr>
<td>session</td>
<td><strong>HttpSession</strong>类的实例</td>
</tr>
<tr>
<td>application</td>
<td><strong>ServletContext</strong>类的实例，与应用上下文有关</td>
</tr>
<tr>
<td>config</td>
<td><strong>ServletConfig</strong>类的实例</td>
</tr>
<tr>
<td>pageContext</td>
<td><strong>PageContext</strong>类的实例，提供对 JSP 页面所有对象以及命名空间的访问</td>
</tr>
<tr>
<td>page</td>
<td>类似于 Java 类中的 this 关键字</td>
</tr>
<tr>
<td>Exception</td>
<td><strong>Exception</strong>类的对象，代表发生错误的 JSP 页面中对应的异常对象</td>
</tr>
</tbody></table>
<h3 id="request-对象"><a href="#request-对象" class="headerlink" title="request 对象"></a>request 对象</h3><p><code>request</code>对象是<code>javax.servlet.http.HttpServletRequest</code> 类的实例。</p>
<p>每当客户端请求一个 JSP 页面时，JSP 引擎就会制造一个新的<code>request</code>对象来代表这个请求。</p>
<p><code>request</code>对象提供了一系列方法来获取 HTTP 头信息，cookies，HTTP 方法等等。</p>
<h3 id="response-对象"><a href="#response-对象" class="headerlink" title="response 对象"></a>response 对象</h3><p><code>response</code>对象是<code>javax.servlet.http.HttpServletResponse</code>类的实例。</p>
<p>当服务器创建<code>request</code>对象时会同时创建用于响应这个客户端的<code>response</code>对象。</p>
<p><code>response</code>对象也定义了处理 HTTP 头模块的接口。通过这个对象，开发者们可以添加新的 cookies，时间戳，HTTP 状态码等等。</p>
<h3 id="out-对象"><a href="#out-对象" class="headerlink" title="out 对象"></a>out 对象</h3><p><code>out</code>对象是<code>javax.servlet.jsp.JspWriter</code>类的实例，用来在<code>response</code>对象中写入内容。</p>
<p>最初的<code>JspWriter</code>类对象根据页面是否有缓存来进行不同的实例化操作。可以在<code>page</code>指令中使用<code>buffered=&#39;false&#39;</code>属性来轻松关闭缓存。</p>
<p><code>JspWriter</code>类包含了大部分<code>java.io.PrintWriter</code>类中的方法。不过，<code>JspWriter</code>新增了一些专为处理缓存而设计的方法。还有就是，<code>JspWriter</code>类会抛出<code>IOExceptions</code>异常，而<code>PrintWriter</code>不会。</p>
<p>下表列出了我们将会用来输出<code>boolean</code>，<code>char</code>，<code>int</code>，<code>double</code>，<code>String</code>，<code>object</code>等类型数据的重要方法：</p>
<table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>out.print(dataType dt)</strong></td>
<td>输出 Type 类型的值</td>
</tr>
<tr>
<td><strong>out.println(dataType dt)</strong></td>
<td>输出 Type 类型的值然后换行</td>
</tr>
<tr>
<td><strong>out.flush()</strong></td>
<td>刷新输出流</td>
</tr>
</tbody></table>
<h3 id="session-对象"><a href="#session-对象" class="headerlink" title="session 对象"></a>session 对象</h3><p><code>session</code>对象是<code>javax.servlet.http.HttpSession</code>类的实例。和 Java Servlets 中的<code>session</code>对象有一样的行为。</p>
<p><code>session</code>对象用来跟踪在各个客户端请求间的会话。</p>
<h3 id="application-对象"><a href="#application-对象" class="headerlink" title="application 对象"></a>application 对象</h3><p><code>application</code>对象直接包装了 servlet 的<code>ServletContext</code>类的对象，是<code>javax.servlet.ServletContext</code>类的实例。</p>
<p>这个对象在 JSP 页面的整个生命周期中都代表着这个 JSP 页面。这个对象在 JSP 页面初始化时被创建，随着<code>jspDestroy()</code>方法的调用而被移除。</p>
<p>通过向<code>application</code>中添加属性，则所有组成您 web 应用的 JSP 文件都能访问到这些属性。</p>
<h3 id="config-对象"><a href="#config-对象" class="headerlink" title="config 对象"></a>config 对象</h3><p><code>config</code>对象是<code>javax.servlet.ServletConfig</code>类的实例，直接包装了 servlet 的<code>ServletConfig</code>类的对象。</p>
<p>这个对象允许开发者访问 Servlet 或者 JSP 引擎的初始化参数，比如文件路径等。</p>
<p>以下是 config 对象的使用方法，不是很重要，所以不常用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.getServletName();</span><br></pre></td></tr></table></figure>

<p>它返回包含在<code>&lt;servlet-name&gt;</code>元素中的 servlet 名字，注意，<code>&lt;servlet-name&gt;</code>元素在<code>WEB-INF\web.xml</code>文件中定义。</p>
<h3 id="pageContext-对象"><a href="#pageContext-对象" class="headerlink" title="pageContext 对象"></a>pageContext 对象</h3><p><code>pageContext</code>对象是<code>javax.servlet.jsp.PageContext</code>类的实例，用来代表整个 JSP 页面。</p>
<p>这个对象主要用来访问页面信息，同时过滤掉大部分实现细节。</p>
<p>这个对象存储了<code>request</code>对象和<code>response</code>对象的引用。<code>application</code>对象，<code>config</code>对象，<code>session</code>对象，<code>out</code>对象可以通过访问这个对象的属性来导出。</p>
<p><code>pageContext</code>对象也包含了传给 JSP 页面的指令信息，包括缓存信息，ErrorPage URL,页面 scope 等。</p>
<p><code>PageContext</code>类定义了一些字段，包括 PAGE_SCOPE，REQUEST_SCOPE，SESSION_SCOPE， APPLICATION_SCOPE。它也提供了 40 余种方法，有一半继承自<code>javax.servlet.jsp.JspContext</code> 类。</p>
<p>其中一个重要的方法就是<code>removeArribute()</code>，它可接受一个或两个参数。比如，pageContext.removeArribute(“attrName”)移除四个 scope 中相关属性，但是下面这种方法只移除特定 scope 中的相关属性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pageContext.removeAttribute(&quot;attrName&quot;, PAGE_SCOPE);</span><br></pre></td></tr></table></figure>

<h3 id="page-对象"><a href="#page-对象" class="headerlink" title="page 对象"></a>page 对象</h3><p>这个对象就是页面实例的引用。它可以被看做是整个 JSP 页面的代表。</p>
<p><code>page</code>对象就是<code>this</code>对象的同义词。</p>
<h3 id="exception-对象"><a href="#exception-对象" class="headerlink" title="exception 对象"></a>exception 对象</h3><p><code>exception</code>对象包装了从先前页面中抛出的异常信息。它通常被用来产生对出错条件的适当响应。</p>
<h2 id="EL-表达式"><a href="#EL-表达式" class="headerlink" title="EL 表达式"></a>EL 表达式</h2><p>EL 表达式是用<code>$&#123;&#125;</code>括起来的脚本，用来更方便地读取对象。EL 表达式写在 JSP 的 HTML 代码中，而不能写在<code>&lt;%</code>与<code>%&gt;</code>引起的 JSP 脚本中。</p>
<p>JSP 表达式语言（EL）使得访问存储在 JavaBean 中的数据变得非常简单。JSP EL 既可以用来创建算术表达式也可以用来创建逻辑表达式。在 JSP EL 表达式内可以使用整型数，浮点数，字符串，常量 true、false，还有 null。</p>
<h3 id="一个简单的语法"><a href="#一个简单的语法" class="headerlink" title="一个简单的语法"></a>一个简单的语法</h3><p>典型的，当您需要在 JSP 标签中指定一个属性值时，只需要简单地使用字符串即可：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:setProperty name=&quot;box&quot; property=&quot;perimeter&quot; value=&quot;100&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>JSP EL 允许您指定一个表达式来表示属性值。一个简单的表达式语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;expr&#125;</span><br></pre></td></tr></table></figure>

<p>其中，expr 指的是表达式。在 JSP EL 中通用的操作符是”.”和”[]”。这两个操作符允许您通过内嵌的 JSP 对象访问各种各样的 JavaBean 属性。</p>
<p>举例来说，上面的 <code>&lt;jsp:setProperty&gt;</code> 标签可以使用表达式语言改写成如下形式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:setProperty</span><br><span class="line">  name=&quot;box&quot;</span><br><span class="line">  property=&quot;perimeter&quot;</span><br><span class="line">  value=&quot;$&#123;2*box.width+2*box.height&#125;&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<p>当 JSP 编译器在属性中见到”${}”格式后，它会产生代码来计算这个表达式，并且产生一个替代品来代替表达式的值。</p>
<p>您也可以在标签的模板文本中使用表达式语言。比如 <code>&lt;jsp:text&gt;</code> 标签简单地将其主体中的文本插入到 JSP 输出中：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;</span><br><span class="line">  &lt;h1&gt;Hello JSP!&lt;/h1&gt;</span><br><span class="line">&lt;/jsp:text&gt;</span><br></pre></td></tr></table></figure>

<p>现在，在<a href="jsp:text">jsp:text</a>标签主体中使用表达式，就像这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;</span><br><span class="line">  Box Perimeter is: $&#123;2*box.width + 2*box.height&#125;</span><br><span class="line">&lt;/jsp:text&gt;</span><br></pre></td></tr></table></figure>

<p>在 EL 表达式中可以使用圆括号来组织子表达式。比如 <code>$&#123;(1 + 2) _ 3&#125;</code> 等于 9，但是 <code>$&#123;1 + (2 _ 3)&#125;</code> 等于 7。</p>
<p>想要停用对 EL 表达式的评估的话，需要使用 page 指令将 isELIgnored 属性值设为 true：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page isELIgnored =&quot;true|false&quot; %&gt;</span><br></pre></td></tr></table></figure>

<p>这样，EL 表达式就会被忽略。若设为 false，则容器将会计算 EL 表达式。</p>
<h3 id="EL-中的基础操作符"><a href="#EL-中的基础操作符" class="headerlink" title="EL 中的基础操作符"></a>EL 中的基础操作符</h3><p>EL 表达式支持大部分 Java 所提供的算术和逻辑操作符：</p>
<table>
<thead>
<tr>
<th><strong>操作符</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>访问一个 Bean 属性或者一个映射条目</td>
</tr>
<tr>
<td>[]</td>
<td>访问一个数组或者链表的元素</td>
</tr>
<tr>
<td>( )</td>
<td>组织一个子表达式以改变优先级</td>
</tr>
<tr>
<td>+</td>
<td>加</td>
</tr>
<tr>
<td>-</td>
<td>减或负</td>
</tr>
<tr>
<td>*</td>
<td>乘</td>
</tr>
<tr>
<td>&#x2F; or div</td>
<td>除</td>
</tr>
<tr>
<td>% or mod</td>
<td>取模</td>
</tr>
<tr>
<td>&#x3D;&#x3D; or eq</td>
<td>测试是否相等</td>
</tr>
<tr>
<td>!&#x3D; or ne</td>
<td>测试是否不等</td>
</tr>
<tr>
<td>&lt; or lt</td>
<td>测试是否小于</td>
</tr>
<tr>
<td>&gt; or gt</td>
<td>测试是否大于</td>
</tr>
<tr>
<td>&lt;&#x3D; or le</td>
<td>测试是否小于等于</td>
</tr>
<tr>
<td>&gt;&#x3D; or ge</td>
<td>测试是否大于等于</td>
</tr>
<tr>
<td>&amp;&amp; or and</td>
<td>测试逻辑与</td>
</tr>
<tr>
<td>|| or or</td>
<td>测试逻辑或</td>
</tr>
<tr>
<td>! or not</td>
<td>测试取反</td>
</tr>
<tr>
<td>empty</td>
<td>测试是否空值</td>
</tr>
</tbody></table>
<h3 id="JSP-EL-中的函数"><a href="#JSP-EL-中的函数" class="headerlink" title="JSP EL 中的函数"></a>JSP EL 中的函数</h3><p>JSP EL 允许您在表达式中使用函数。这些函数必须被定义在自定义标签库中。函数的使用语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;ns:func(param1, param2, ...)&#125;</span><br></pre></td></tr></table></figure>

<p>ns 指的是命名空间（namespace），func 指的是函数的名称，param1 指的是第一个参数，param2 指的是第二个参数，以此类推。比如，有函数 fn:length，在 JSTL 库中定义，可以像下面这样来获取一个字符串的长度：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;fn:length(&quot;Get my length&quot;)&#125;</span><br></pre></td></tr></table></figure>

<p>要使用任何标签库中的函数，您需要将这些库安装在服务器中，然后使用 <code>&lt;taglib&gt;</code> 标签在 JSP 文件中包含这些库。</p>
<h3 id="JSP-EL-隐含对象"><a href="#JSP-EL-隐含对象" class="headerlink" title="JSP EL 隐含对象"></a>JSP EL 隐含对象</h3><p>JSP EL 支持下表列出的隐含对象：</p>
<table>
<thead>
<tr>
<th><strong>隐含对象</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>pageScope</td>
<td>page 作用域</td>
</tr>
<tr>
<td>requestScope</td>
<td>request 作用域</td>
</tr>
<tr>
<td>sessionScope</td>
<td>session 作用域</td>
</tr>
<tr>
<td>applicationScope</td>
<td>application 作用域</td>
</tr>
<tr>
<td>param</td>
<td>Request 对象的参数，字符串</td>
</tr>
<tr>
<td>paramValues</td>
<td>Request 对象的参数，字符串集合</td>
</tr>
<tr>
<td>header</td>
<td>HTTP 信息头，字符串</td>
</tr>
<tr>
<td>headerValues</td>
<td>HTTP 信息头，字符串集合</td>
</tr>
<tr>
<td>initParam</td>
<td>上下文初始化参数</td>
</tr>
<tr>
<td>cookie</td>
<td>Cookie 值</td>
</tr>
<tr>
<td>pageContext</td>
<td>当前页面的 pageContext</td>
</tr>
</tbody></table>
<p>您可以在表达式中使用这些对象，就像使用变量一样。接下来会给出几个例子来更好的理解这个概念。</p>
<h3 id="pageContext-对象-1"><a href="#pageContext-对象-1" class="headerlink" title="pageContext 对象"></a>pageContext 对象</h3><p>pageContext 对象是 JSP 中 pageContext 对象的引用。通过 pageContext 对象，您可以访问 request 对象。比如，访问 request 对象传入的查询字符串，就像这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;pageContext.request.queryString&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Scope-对象"><a href="#Scope-对象" class="headerlink" title="Scope 对象"></a>Scope 对象</h3><p>pageScope，requestScope，sessionScope，applicationScope 变量用来访问存储在各个作用域层次的变量。</p>
<p>举例来说，如果您需要显式访问在 applicationScope 层的 box 变量，可以这样来访问：applicationScope.box。</p>
<h3 id="param-和-paramValues-对象"><a href="#param-和-paramValues-对象" class="headerlink" title="param 和 paramValues 对象"></a>param 和 paramValues 对象</h3><p>param 和 paramValues 对象用来访问参数值，通过使用 request.getParameter 方法和 request.getParameterValues 方法。</p>
<p>举例来说，访问一个名为 order 的参数，可以这样使用表达式：<code>$&#123;param.order&#125;</code>，或者<code>$&#123;param[&quot;order&quot;]&#125;</code>。</p>
<p>接下来的例子表明了如何访问 request 中的 username 参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page import=&quot;java.io.*,java.util.*&quot; %&gt; &lt;% String title = &quot;Accessing Request</span><br><span class="line">Param&quot;; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;% out.print(title); %&gt;&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">      &lt;h1&gt;&lt;% out.print(title); %&gt;&lt;/h1&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line">    &lt;div align=&quot;center&quot;&gt;</span><br><span class="line">      &lt;p&gt;$&#123;param[&quot;username&quot;]&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>param 对象返回单一的字符串，而 paramValues 对象则返回一个字符串数组。</p>
<h3 id="header-和-headerValues-对象"><a href="#header-和-headerValues-对象" class="headerlink" title="header 和 headerValues 对象"></a>header 和 headerValues 对象</h3><p>header 和 headerValues 对象用来访问信息头，通过使用 request.getHeader 方法和 request.getHeaders 方法。</p>
<p>举例来说，要访问一个名为 user-agent 的信息头，可以这样使用表达式：<code>$&#123;header.user-agent&#125;</code>，或者 <code>$&#123;header[&quot;user-agent&quot;]&#125;</code>。</p>
<p>接下来的例子表明了如何访问 user-agent 信息头：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page import=&quot;java.io.*,java.util.*&quot; %&gt; &lt;% String title = &quot;User Agent</span><br><span class="line">Example&quot;; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;% out.print(title); %&gt;&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">      &lt;h1&gt;&lt;% out.print(title); %&gt;&lt;/h1&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line">    &lt;div align=&quot;center&quot;&gt;</span><br><span class="line">      &lt;p&gt;$&#123;header[&quot;user-agent&quot;]&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>运行结果如下：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp-expression-language.jpg" alt="img"></p>
<p>header 对象返回单一值，而 headerValues 则返回一个字符串数组。</p>
<h2 id="JSTL"><a href="#JSTL" class="headerlink" title="JSTL"></a>JSTL</h2><p>JSP 标准标签库（JSTL）是一个 JSP 标签集合，它封装了 JSP 应用的通用核心功能。</p>
<p>JSTL 支持通用的、结构化的任务，比如迭代，条件判断，XML 文档操作，国际化标签，SQL 标签。 除了这些，它还提供了一个框架来使用集成 JSTL 的自定义标签。</p>
<p>根据 JSTL 标签所提供的功能，可以将其分为 5 个类别。</p>
<ul>
<li><strong>核心标签</strong></li>
<li><strong>格式化标签</strong></li>
<li><strong>SQL 标签</strong></li>
<li><strong>XML 标签</strong></li>
<li><strong>JSTL 函数</strong></li>
</ul>
<h3 id="JSTL-库安装"><a href="#JSTL-库安装" class="headerlink" title="JSTL 库安装"></a>JSTL 库安装</h3><p>Apache Tomcat 安装 JSTL 库步骤如下：</p>
<p>从 Apache 的标准标签库中下载的二进包(jakarta-taglibs-standard-current.zip)。</p>
<ul>
<li>官方下载地址：<a target="_blank" rel="noopener" href="http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/">http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/</a></li>
<li>本站下载地址：<a target="_blank" rel="noopener" href="http://static.runoob.com/download/jakarta-taglibs-standard-1.1.2.tar.gz">jakarta-taglibs-standard-1.1.2.zip</a></li>
</ul>
<p>下载 <strong>jakarta-taglibs-standard-1.1.2.zip</strong> 包并解压，将 <strong>jakarta-taglibs-standard-1.1.2&#x2F;lib&#x2F;</strong> 下的两个 jar 文件：<strong>standard.jar</strong> 和 <strong>jstl.jar</strong> 文件拷贝到 <strong>&#x2F;WEB-INF&#x2F;lib&#x2F;</strong> 下。</p>
<p>将 tld 下的需要引入的 tld 文件复制到 WEB-INF 目录下。</p>
<p>接下来我们在 web.xml 文件中添加以下配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app</span><br><span class="line">  version=&quot;2.4&quot;</span><br><span class="line">  xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot;</span><br><span class="line">  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">  xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee</span><br><span class="line">        http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &lt;jsp-config&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/fmt&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/fmt.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/fmt-rt&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/fmt-rt.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/core&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/c.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/core-rt&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/c-rt.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/sql&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/sql.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/sql-rt&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/sql-rt.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/x&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/x.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/x-rt&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/x-rt.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">  &lt;/jsp-config&gt;</span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure>

<p>使用任何库，你必须在每个 JSP 文件中的头部包含 <strong><taglib></strong> 标签。</p>
<h3 id="核心标签"><a href="#核心标签" class="headerlink" title="核心标签"></a>核心标签</h3><p>核心标签是最常用的 JSTL 标签。引用核心标签库的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">标签</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-out-tag.html"><code>&lt;c:out&gt;</code></a></td>
<td align="left">用于在 JSP 中显示数据，就像&lt;%&#x3D; … &gt;</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-set-tag.html"><code>&lt;c:set&gt;</code></a></td>
<td align="left">用于保存数据</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-remove-tag.html"><code>&lt;c:remove&gt;</code></a></td>
<td align="left">用于删除数据</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-catch-tag.html"><code>&lt;c:catch&gt;</code></a></td>
<td align="left">用来处理产生错误的异常状况，并且将错误信息储存起来</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-if-tag.html"><code>&lt;c:if&gt;</code></a></td>
<td align="left">与我们在一般程序中用的 if 一样</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-choose-tag.html"><code>&lt;c:choose&gt;</code></a></td>
<td align="left">本身只当做&lt;c:when&gt;和&lt;c:otherwise&gt;的父标签</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-choose-tag.html"><code>&lt;c:when&gt;</code></a></td>
<td align="left">&lt;c:choose&gt;的子标签，用来判断条件是否成立</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-choose-tag.html"><code>&lt;c:otherwise&gt;</code></a></td>
<td align="left">&lt;c:choose&gt;的子标签，接在&lt;c:when&gt;标签后，当&lt;c:when&gt;标签判断为 false 时被执行</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-import-tag.html"><code>&lt;c:import&gt;</code></a></td>
<td align="left">检索一个绝对或相对 URL，然后将其内容暴露给页面</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-foreach-tag.html"><code>&lt;c:forEach&gt;</code></a></td>
<td align="left">基础迭代标签，接受多种集合类型</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-foreach-tag.html"><code>&lt;c:forTokens&gt;</code></a></td>
<td align="left">根据指定的分隔符来分隔内容并迭代输出</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-param-tag.html"><code>&lt;c:param&gt;</code></a></td>
<td align="left">用来给包含或重定向的页面传递参数</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-redirect-tag.html"><code>&lt;c:redirect&gt;</code></a></td>
<td align="left">重定向至一个新的 URL.</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-url-tag.html"><code>&lt;c:url&gt;</code></a></td>
<td align="left">使用可选的查询参数来创造一个 URL</td>
</tr>
</tbody></table>
<h3 id="格式化标签"><a href="#格式化标签" class="headerlink" title="格式化标签"></a>格式化标签</h3><p>JSTL 格式化标签用来格式化并输出文本、日期、时间、数字。引用格式化标签库的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;fmt&quot; uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot; %&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">标签</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-formatnumber-tag.html"><code>&lt;fmt:formatNumber&gt;</code></a></td>
<td align="left">使用指定的格式或精度格式化数字</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-parsenumber-tag.html"><code>&lt;fmt:parseNumber&gt;</code></a></td>
<td align="left">解析一个代表着数字，货币或百分比的字符串</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-formatdate-tag.html"><code>&lt;fmt:formatDate&gt;</code></a></td>
<td align="left">使用指定的风格或模式格式化日期和时间</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-parsedate-tag.html"><code>&lt;fmt:parseDate&gt;</code></a></td>
<td align="left">解析一个代表着日期或时间的字符串</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-bundle-tag.html"><code>&lt;fmt:bundle&gt;</code></a></td>
<td align="left">绑定资源</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-setlocale-tag.html"><code>&lt;fmt:setLocale&gt;</code></a></td>
<td align="left">指定地区</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-setbundle-tag.html"><code>&lt;fmt:setBundle&gt;</code></a></td>
<td align="left">绑定资源</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-timezone-tag.html"><code>&lt;fmt:timeZone&gt;</code></a></td>
<td align="left">指定时区</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-settimezone-tag.html"><code>&lt;fmt:setTimeZone&gt;</code></a></td>
<td align="left">指定时区</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-message-tag.html"><code>&lt;fmt:message&gt;</code></a></td>
<td align="left">显示资源配置文件信息</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-requestencoding-tag.html"><code>&lt;fmt:requestEncoding&gt;</code></a></td>
<td align="left">设置 request 的字符编码</td>
</tr>
</tbody></table>
<h3 id="SQL-标签"><a href="#SQL-标签" class="headerlink" title="SQL 标签"></a>SQL 标签</h3><p>JSTL SQL 标签库提供了与关系型数据库（Oracle，MySQL，SQL Server 等等）进行交互的标签。引用 SQL 标签库的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;sql&quot; uri=&quot;http://java.sun.com/jsp/jstl/sql&quot; %&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">标签</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-setdatasource-tag.html"><code>&lt;sql:setDataSource&gt;</code></a></td>
<td align="left">指定数据源</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-query-tag.html"><code>&lt;sql:query&gt;</code></a></td>
<td align="left">运行 SQL 查询语句</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-update-tag.html"><code>&lt;sql:update&gt;</code></a></td>
<td align="left">运行 SQL 更新语句</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-param-tag.html"><code>&lt;sql:param&gt;</code></a></td>
<td align="left">将 SQL 语句中的参数设为指定值</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-dateparam-tag.html"><code>&lt;sql:dateParam&gt;</code></a></td>
<td align="left">将 SQL 语句中的日期参数设为指定的 java.util.Date 对象值</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-transaction-tag.html"><code>&lt;sql:transaction&gt;</code></a></td>
<td align="left">在共享数据库连接中提供嵌套的数据库行为元素，将所有语句以一个事务的形式来运行</td>
</tr>
</tbody></table>
<h3 id="XML-标签"><a href="#XML-标签" class="headerlink" title="XML 标签"></a>XML 标签</h3><p>JSTL XML 标签库提供了创建和操作 XML 文档的标签。引用 XML 标签库的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;x&quot; uri=&quot;http://java.sun.com/jsp/jstl/xml&quot; %&gt;</span><br></pre></td></tr></table></figure>

<p>在使用 xml 标签前，你必须将 XML 和 XPath 的相关包拷贝至你的 <code>&lt;Tomcat 安装目录&gt;\lib</code> 下:</p>
<ul>
<li><p>XercesImpl.jar</p>
<p>下载地址： <a target="_blank" rel="noopener" href="http://www.apache.org/dist/xerces/j/">http://www.apache.org/dist/xerces/j/</a></p>
</li>
<li><p>xalan.jar</p>
<p>下载地址： <a target="_blank" rel="noopener" href="http://xml.apache.org/xalan-j/index.html">http://xml.apache.org/xalan-j/index.html</a></p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">标签</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-out-tag.html"><code>&lt;x:out&gt;</code></a></td>
<td align="left">与&lt;%&#x3D; … &gt;,类似，不过只用于 XPath 表达式</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-parse-tag.html"><code>&lt;x:parse&gt;</code></a></td>
<td align="left">解析 XML 数据</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-set-tag.html"><code>&lt;x:set&gt;</code></a></td>
<td align="left">设置 XPath 表达式</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-if-tag.html"><code>&lt;x:if&gt;</code></a></td>
<td align="left">判断 XPath 表达式，若为真，则执行本体中的内容，否则跳过本体</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-foreach-tag.html"><code>&lt;x:forEach&gt;</code></a></td>
<td align="left">迭代 XML 文档中的节点</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-choose-tag.html"><code>&lt;x:choose&gt;</code></a></td>
<td align="left">&lt;x:when&gt;和&lt;x:otherwise&gt;的父标签</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-choose-tag.html"><code>&lt;x:when&gt;</code></a></td>
<td align="left">&lt;x:choose&gt;的子标签，用来进行条件判断</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-choose-tag.html"><code>&lt;x:otherwise&gt;</code></a></td>
<td align="left">&lt;x:choose&gt;的子标签，当&lt;x:when&gt;判断为 false 时被执行</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-transform-tag.html"><code>&lt;x:transform&gt;</code></a></td>
<td align="left">将 XSL 转换应用在 XML 文档中</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-param-tag.html"><code>&lt;x:param&gt;</code></a></td>
<td align="left">与&lt;x:transform&gt;共同使用，用于设置 XSL 样式表</td>
</tr>
</tbody></table>
<h3 id="JSTL-函数"><a href="#JSTL-函数" class="headerlink" title="JSTL 函数"></a>JSTL 函数</h3><p>JSTL 包含一系列标准函数，大部分是通用的字符串处理函数。引用 JSTL 函数库的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;fn&quot; uri=&quot;http://java.sun.com/jsp/jstl/functions&quot; %&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">函数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-contains.html">fn:contains()</a></td>
<td align="left">测试输入的字符串是否包含指定的子串</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-containsignoreCase.html">fn:containsIgnoreCase()</a></td>
<td align="left">测试输入的字符串是否包含指定的子串，大小写不敏感</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-endswith.html">fn:endsWith()</a></td>
<td align="left">测试输入的字符串是否以指定的后缀结尾</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-escapexml.html">fn:escapeXml()</a></td>
<td align="left">跳过可以作为 XML 标记的字符</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-indexof.html">fn:indexOf()</a></td>
<td align="left">返回指定字符串在输入字符串中出现的位置</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-join.html">fn:join()</a></td>
<td align="left">将数组中的元素合成一个字符串然后输出</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-length.html">fn:length()</a></td>
<td align="left">返回字符串长度</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-replace.html">fn:replace()</a></td>
<td align="left">将输入字符串中指定的位置替换为指定的字符串然后返回</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-split.html">fn:split()</a></td>
<td align="left">将字符串用指定的分隔符分隔然后组成一个子字符串数组并返回</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-startswith.html">fn:startsWith()</a></td>
<td align="left">测试输入字符串是否以指定的前缀开始</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-substring.html">fn:substring()</a></td>
<td align="left">返回字符串的子集</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-substringafter.html">fn:substringAfter()</a></td>
<td align="left">返回字符串在指定子串之后的子集</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-substringbefore.html">fn:substringBefore()</a></td>
<td align="left">返回字符串在指定子串之前的子集</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-tolowercase.html">fn:toLowerCase()</a></td>
<td align="left">将字符串中的字符转为小写</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-touppercase.html">fn:toUpperCase()</a></td>
<td align="left">将字符串中的字符转为大写</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-trim.html">fn:trim()</a></td>
<td align="left">移除首尾的空白符</td>
</tr>
</tbody></table>
<h2 id="Taglib"><a href="#Taglib" class="headerlink" title="Taglib"></a>Taglib</h2><h3 id="JSP-自定义标签"><a href="#JSP-自定义标签" class="headerlink" title="JSP 自定义标签"></a>JSP 自定义标签</h3><p>自定义标签是用户定义的 JSP 语言元素。当 JSP 页面包含一个自定义标签时将被转化为 servlet，标签转化为对被 称为 tag handler 的对象的操作，即当 servlet 执行时 Web container 调用那些操作。</p>
<p>JSP 标签扩展可以让你创建新的标签并且可以直接插入到一个 JSP 页面。 JSP 2.0 规范中引入 Simple Tag Handlers 来编写这些自定义标记。</p>
<p>你可以继承 SimpleTagSupport 类并重写的 doTag()方法来开发一个最简单的自定义标签。</p>
<h3 id="创建”Hello”标签"><a href="#创建”Hello”标签" class="headerlink" title="创建”Hello”标签"></a>创建”Hello”标签</h3><p>接下来，我们想创建一个自定义标签叫作<a href="ex:Hello">ex:Hello</a>，标签格式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ex:Hello /&gt;</span><br></pre></td></tr></table></figure>

<p>要创建自定义的 JSP 标签，你首先必须创建处理标签的 Java 类。所以，让我们创建一个 HelloTag 类，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">package com.runoob; import javax.servlet.jsp.tagext.*; import</span><br><span class="line">javax.servlet.jsp.*; import java.io.*; public class HelloTag extends</span><br><span class="line">SimpleTagSupport &#123; public void doTag() throws JspException, IOException &#123;</span><br><span class="line">JspWriter out = getJspContext().getOut(); out.println(&quot;Hello Custom Tag!&quot;); &#125; &#125;</span><br></pre></td></tr></table></figure>

<p>以下代码重写了 doTag()方法，方法中使用了 getJspContext()方法来获取当前的 JspContext 对象，并将”Hello Custom Tag!”传递给 JspWriter 对象。</p>
<p>编译以上类，并将其复制到环境变量 CLASSPATH 目录中。最后创建如下标签库：<code>&lt;Tomcat安装目录&gt;webapps\ROOT\WEB-INF\custom.tld</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;taglib&gt;</span><br><span class="line">  &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;</span><br><span class="line">  &lt;jsp-version&gt;2.0&lt;/jsp-version&gt;</span><br><span class="line">  &lt;short-name&gt;Example TLD&lt;/short-name&gt;</span><br><span class="line">  &lt;tag&gt;</span><br><span class="line">    &lt;name&gt;Hello&lt;/name&gt;</span><br><span class="line">    &lt;tag-class&gt;com.runoob.HelloTag&lt;/tag-class&gt;</span><br><span class="line">    &lt;body-content&gt;empty&lt;/body-content&gt;</span><br><span class="line">  &lt;/tag&gt;</span><br><span class="line">&lt;/taglib&gt;</span><br></pre></td></tr></table></figure>

<p>接下来，我们就可以在 JSP 文件中使用 Hello 标签：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;ex&quot; uri=&quot;WEB-INF/custom.tld&quot;%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;A sample custom tag&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;ex:Hello /&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>以上程序输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello Custom Tag!</span><br></pre></td></tr></table></figure>

<h3 id="访问标签体"><a href="#访问标签体" class="headerlink" title="访问标签体"></a>访问标签体</h3><p>你可以像标准标签库一样在标签中包含消息内容。如我们要在我们自定义的 Hello 中包含内容，格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ex:Hello&gt;</span><br><span class="line">  This is message body</span><br><span class="line">&lt;/ex:Hello&gt;</span><br></pre></td></tr></table></figure>

<p>我们可以修改标签处理类文件，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloTag</span> <span class="keyword">extends</span> <span class="title class_">SimpleTagSupport</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="type">StringWriter</span> <span class="variable">sw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringWriter</span>();</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doTag</span><span class="params">()</span></span><br><span class="line">      <span class="keyword">throws</span> JspException, IOException</span><br><span class="line">    &#123;</span><br><span class="line">       getJspBody().invoke(sw);</span><br><span class="line">       getJspContext().getOut().println(sw.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来我们需要修改 TLD 文件，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;taglib&gt;</span><br><span class="line">  &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;</span><br><span class="line">  &lt;jsp-version&gt;2.0&lt;/jsp-version&gt;</span><br><span class="line">  &lt;short-name&gt;Example TLD with Body&lt;/short-name&gt;</span><br><span class="line">  &lt;tag&gt;</span><br><span class="line">    &lt;name&gt;Hello&lt;/name&gt;</span><br><span class="line">    &lt;tag-class&gt;com.runoob.HelloTag&lt;/tag-class&gt;</span><br><span class="line">    &lt;body-content&gt;scriptless&lt;/body-content&gt;</span><br><span class="line">  &lt;/tag&gt;</span><br><span class="line">&lt;/taglib&gt;</span><br></pre></td></tr></table></figure>

<p>现在我们可以在 JSP 使用修改后的标签，如下所示:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;ex&quot; uri=&quot;WEB-INF/custom.tld&quot;%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;A sample custom tag&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;ex:Hello&gt;</span><br><span class="line">      This is message body</span><br><span class="line">    &lt;/ex:Hello&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>以上程序输出结果如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This is message body</span><br></pre></td></tr></table></figure>

<h3 id="自定义标签属性"><a href="#自定义标签属性" class="headerlink" title="自定义标签属性"></a>自定义标签属性</h3><p>你可以在自定义标准中设置各种属性，要接收属性，值自定义标签类必须实现 setter 方法， JavaBean 中的 setter 方法如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloTag</span> <span class="keyword">extends</span> <span class="title class_">SimpleTagSupport</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMessage</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.message = msg;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="type">StringWriter</span> <span class="variable">sw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringWriter</span>();</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doTag</span><span class="params">()</span></span><br><span class="line">      <span class="keyword">throws</span> JspException, IOException</span><br><span class="line">    &#123;</span><br><span class="line">       <span class="keyword">if</span> (message != <span class="literal">null</span>) &#123;</span><br><span class="line">          <span class="comment">/* 从属性中使用消息 */</span></span><br><span class="line">          <span class="type">JspWriter</span> <span class="variable">out</span> <span class="operator">=</span> getJspContext().getOut();</span><br><span class="line">          out.println( message );</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">/* 从内容体中使用消息 */</span></span><br><span class="line">          getJspBody().invoke(sw);</span><br><span class="line">          getJspContext().getOut().println(sw.toString());</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>属性的名称是”message”，所以 setter 方法是的 setMessage()。现在让我们在 TLD 文件中使用的<attribute>元素添加此属性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;taglib&gt;</span><br><span class="line">  &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;</span><br><span class="line">  &lt;jsp-version&gt;2.0&lt;/jsp-version&gt;</span><br><span class="line">  &lt;short-name&gt;Example TLD with Body&lt;/short-name&gt;</span><br><span class="line">  &lt;tag&gt;</span><br><span class="line">    &lt;name&gt;Hello&lt;/name&gt;</span><br><span class="line">    &lt;tag-class&gt;com.runoob.HelloTag&lt;/tag-class&gt;</span><br><span class="line">    &lt;body-content&gt;scriptless&lt;/body-content&gt;</span><br><span class="line">    &lt;attribute&gt;</span><br><span class="line">      &lt;name&gt;message&lt;/name&gt;</span><br><span class="line">    &lt;/attribute&gt;</span><br><span class="line">  &lt;/tag&gt;</span><br><span class="line">&lt;/taglib&gt;</span><br></pre></td></tr></table></figure>

<p>现在我们就可以在 JSP 文件中使用 message 属性了，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;ex&quot; uri=&quot;WEB-INF/custom.tld&quot;%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;A sample custom tag&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;ex:Hello message=&quot;This is custom tag&quot; /&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>以上实例数据输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This is custom tag</span><br></pre></td></tr></table></figure>

<p>你还可以包含以下属性：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">name</td>
<td align="left">定义属性的名称。每个标签的是属性名称必须是唯一的。</td>
</tr>
<tr>
<td align="left">required</td>
<td align="left">指定属性是否是必须的或者可选的,如果设置为 false 为可选。</td>
</tr>
<tr>
<td align="left">rtexprvalue</td>
<td align="left">声明在运行表达式时，标签属性是否有效。</td>
</tr>
<tr>
<td align="left">type</td>
<td align="left">定义该属性的 Java 类类型 。默认指定为 <strong>String</strong></td>
</tr>
<tr>
<td align="left">description</td>
<td align="left">描述信息</td>
</tr>
<tr>
<td align="left">fragment</td>
<td align="left">如果声明了该属性,属性值将被视为一个 <strong>JspFragment</strong>。</td>
</tr>
</tbody></table>
<p>以下是指定相关的属性实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line">&lt;attribute&gt;</span><br><span class="line">  &lt;name&gt;attribute_name&lt;/name&gt;</span><br><span class="line">  &lt;required&gt;false&lt;/required&gt;</span><br><span class="line">  &lt;type&gt;java.util.Date&lt;/type&gt;</span><br><span class="line">  &lt;fragment&gt;false&lt;/fragment&gt;</span><br><span class="line">&lt;/attribute&gt;</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>

<p>如果你使用了两个属性，修改 TLD 文件，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line">&lt;attribute&gt;</span><br><span class="line">  &lt;name&gt;attribute_name1&lt;/name&gt;</span><br><span class="line">  &lt;required&gt;false&lt;/required&gt;</span><br><span class="line">  &lt;type&gt;java.util.Boolean&lt;/type&gt;</span><br><span class="line">  &lt;fragment&gt;false&lt;/fragment&gt;</span><br><span class="line">&lt;/attribute&gt;</span><br><span class="line">&lt;attribute&gt;</span><br><span class="line">  &lt;name&gt;attribute_name2&lt;/name&gt;</span><br><span class="line">  &lt;required&gt;true&lt;/required&gt;</span><br><span class="line">  &lt;type&gt;java.util.Date&lt;/type&gt;</span><br><span class="line">&lt;/attribute&gt;</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">JaHero</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/pages/8cc787/">http://example.com/pages/8cc787/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">贾英雄-blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a><a class="post-meta__tags" href="/tags/JavaWeb/">JavaWeb</a><a class="post-meta__tags" href="/tags/JSP/">JSP</a></div><div class="post_share"><div class="social-share" data-image="/img/post.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://fastly.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/pages/e98894/" title="JavaWeb 之 Servlet 指南"><img class="cover" src="/img/post.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-24</div><div class="title">JavaWeb 之 Servlet 指南</div></div></a></div><div><a href="/pages/82df5f/" title="JavaWeb 之 Filter 和 Listener"><img class="cover" src="/img/post.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-24</div><div class="title">JavaWeb 之 Filter 和 Listener</div></div></a></div><div><a href="/pages/c46bff/" title="JavaWeb 之 Cookie 和 Session"><img class="cover" src="/img/post.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-24</div><div class="title">JavaWeb 之 Cookie 和 Session</div></div></a></div><div><a href="/pages/e175ce/" title="JavaWeb 面经"><img class="cover" src="/img/post.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-02-07</div><div class="title">JavaWeb 面经</div></div></a></div><div><a href="/pages/e3f3f3/" title="Java 服务器"><img class="cover" src="/img/post.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-17</div><div class="title">Java 服务器</div></div></a></div><div><a href="/pages/ec364e/" title="Jetty 快速入门"><img class="cover" src="/img/post.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-17</div><div class="title">Jetty 快速入门</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/ava.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">JaHero</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">495</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">294</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">118</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/JiaHero7/JiaHero7.github.io/" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JavaWeb-%E4%B9%8B-Jsp-%E6%8C%87%E5%8D%97"><span class="toc-number">1.</span> <span class="toc-text">JavaWeb 之 Jsp 指南</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-Java-Server-Pages"><span class="toc-number">1.1.1.</span> <span class="toc-text">什么是 Java Server Pages</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8-JSP"><span class="toc-number">1.1.2.</span> <span class="toc-text">为什么使用 JSP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">1.1.3.</span> <span class="toc-text">JSP 的优势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSP-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">1.2.</span> <span class="toc-text">JSP 工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">1.2.1.</span> <span class="toc-text">JSP 工作流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">工作步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.2.2.</span> <span class="toc-text">JSP 生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#JSP-%E7%BC%96%E8%AF%91"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">JSP 编译</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JSP-%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">JSP 初始化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JSP-%E6%89%A7%E8%A1%8C"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">JSP 执行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JSP-%E6%B8%85%E7%90%86"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">JSP 清理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.</span> <span class="toc-text">语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC"><span class="toc-number">1.3.1.</span> <span class="toc-text">脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AD%E6%96%87%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">中文编码问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E5%A3%B0%E6%98%8E"><span class="toc-number">1.3.2.</span> <span class="toc-text">JSP 声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.3.3.</span> <span class="toc-text">JSP 表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E6%B3%A8%E9%87%8A"><span class="toc-number">1.3.4.</span> <span class="toc-text">JSP 注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.3.5.</span> <span class="toc-text">控制语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#if%E2%80%A6else-%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">if…else 语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#switch%E2%80%A6case-%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">switch…case 语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.3.5.3.</span> <span class="toc-text">循环语句</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E5%AD%97%E9%9D%A2%E9%87%8F"><span class="toc-number">1.3.6.</span> <span class="toc-text">JSP 字面量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.</span> <span class="toc-text">指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Page-%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.1.</span> <span class="toc-text">Page 指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Include-%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.2.</span> <span class="toc-text">Include 指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Taglib-%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.3.</span> <span class="toc-text">Taglib 指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSP-%E5%8A%A8%E4%BD%9C%E5%85%83%E7%B4%A0"><span class="toc-number">1.5.</span> <span class="toc-text">JSP 动作元素</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">1.5.1.</span> <span class="toc-text">常见的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-include-gt"><span class="toc-number">1.5.2.</span> <span class="toc-text">&lt;jsp:include&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-useBean-gt"><span class="toc-number">1.5.3.</span> <span class="toc-text">&lt;jsp:useBean&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-setProperty-gt"><span class="toc-number">1.5.4.</span> <span class="toc-text">&lt;jsp:setProperty&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-getProperty-gt"><span class="toc-number">1.5.5.</span> <span class="toc-text">&lt;jsp:getProperty&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-forward-gt"><span class="toc-number">1.5.6.</span> <span class="toc-text">&lt;jsp:forward&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-plugin-gt"><span class="toc-number">1.5.7.</span> <span class="toc-text">&lt;jsp:plugin&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-element-gt-%E3%80%81-lt-jsp-attribute-gt-%E3%80%81-lt-jsp-body-gt"><span class="toc-number">1.5.8.</span> <span class="toc-text">&lt;jsp:element&gt; 、 &lt;jsp:attribute&gt;、&lt;jsp:body&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-text-gt"><span class="toc-number">1.5.9.</span> <span class="toc-text">&lt;jsp:text&gt;</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSP-%E9%9A%90%E5%BC%8F%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.</span> <span class="toc-text">JSP 隐式对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#request-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.1.</span> <span class="toc-text">request 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#response-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.2.</span> <span class="toc-text">response 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#out-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.3.</span> <span class="toc-text">out 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.4.</span> <span class="toc-text">session 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#application-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.5.</span> <span class="toc-text">application 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#config-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.6.</span> <span class="toc-text">config 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pageContext-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.7.</span> <span class="toc-text">pageContext 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#page-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.8.</span> <span class="toc-text">page 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exception-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.9.</span> <span class="toc-text">exception 对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EL-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.7.</span> <span class="toc-text">EL 表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">1.7.1.</span> <span class="toc-text">一个简单的语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EL-%E4%B8%AD%E7%9A%84%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.7.2.</span> <span class="toc-text">EL 中的基础操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-EL-%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.7.3.</span> <span class="toc-text">JSP EL 中的函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-EL-%E9%9A%90%E5%90%AB%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.7.4.</span> <span class="toc-text">JSP EL 隐含对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pageContext-%E5%AF%B9%E8%B1%A1-1"><span class="toc-number">1.7.5.</span> <span class="toc-text">pageContext 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scope-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.7.6.</span> <span class="toc-text">Scope 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#param-%E5%92%8C-paramValues-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.7.7.</span> <span class="toc-text">param 和 paramValues 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#header-%E5%92%8C-headerValues-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.7.8.</span> <span class="toc-text">header 和 headerValues 对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSTL"><span class="toc-number">1.8.</span> <span class="toc-text">JSTL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSTL-%E5%BA%93%E5%AE%89%E8%A3%85"><span class="toc-number">1.8.1.</span> <span class="toc-text">JSTL 库安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%A0%87%E7%AD%BE"><span class="toc-number">1.8.2.</span> <span class="toc-text">核心标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%A0%87%E7%AD%BE"><span class="toc-number">1.8.3.</span> <span class="toc-text">格式化标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL-%E6%A0%87%E7%AD%BE"><span class="toc-number">1.8.4.</span> <span class="toc-text">SQL 标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XML-%E6%A0%87%E7%AD%BE"><span class="toc-number">1.8.5.</span> <span class="toc-text">XML 标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSTL-%E5%87%BD%E6%95%B0"><span class="toc-number">1.8.6.</span> <span class="toc-text">JSTL 函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Taglib"><span class="toc-number">1.9.</span> <span class="toc-text">Taglib</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE"><span class="toc-number">1.9.1.</span> <span class="toc-text">JSP 自定义标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E2%80%9DHello%E2%80%9D%E6%A0%87%E7%AD%BE"><span class="toc-number">1.9.2.</span> <span class="toc-text">创建”Hello”标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E6%A0%87%E7%AD%BE%E4%BD%93"><span class="toc-number">1.9.3.</span> <span class="toc-text">访问标签体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE%E5%B1%9E%E6%80%A7"><span class="toc-number">1.9.4.</span> <span class="toc-text">自定义标签属性</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/12/31/image/%E7%AC%AC%E4%B8%80%E5%A4%A9%E7%AC%94%E8%AE%B0/" title="无题"><img src="/img/post.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2022/12/31/image/%E7%AC%AC%E4%B8%80%E5%A4%A9%E7%AC%94%E8%AE%B0/" title="无题">无题</a><time datetime="2022-12-31T04:24:34.153Z" title="发表于 2022-12-31 12:24:34">2022-12-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/31/img/index/" title="gallery"><img src="/img/post.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="gallery"/></a><div class="content"><a class="title" href="/2022/12/31/img/index/" title="gallery">gallery</a><time datetime="2022-12-30T18:20:45.000Z" title="发表于 2022-12-31 02:20:45">2022-12-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/30/hello-world/" title="Hello World"><img src="/img/post.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/2022/12/30/hello-world/" title="Hello World">Hello World</a><time datetime="2022-12-30T09:13:14.141Z" title="发表于 2022-12-30 17:13:14">2022-12-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/26/Aop%E6%B3%A8%E8%A7%A3/" title="Aop注解"><img src="/img/post.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Aop注解"/></a><div class="content"><a class="title" href="/2022/12/26/Aop%E6%B3%A8%E8%A7%A3/" title="Aop注解">Aop注解</a><time datetime="2022-12-26T04:40:09.000Z" title="发表于 2022-12-26 12:40:09">2022-12-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/26/Flowable%20%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/" title="Flowable 工作流程引擎"><img src="/img/post.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Flowable 工作流程引擎"/></a><div class="content"><a class="title" href="/2022/12/26/Flowable%20%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/" title="Flowable 工作流程引擎">Flowable 工作流程引擎</a><time datetime="2022-12-26T04:40:09.000Z" title="发表于 2022-12-26 12:40:09">2022-12-26</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/post.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 By JaHero</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/algolia.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script src="https://fastly.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.removeEventListener('scroll', window.tocScrollFn)
  window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>